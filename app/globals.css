.alert-holder{min-height:28px;padding:0 16px}
:root{--fanSize:clamp(120px,12vw,180px);--gap:12px;--bg:#fefefe;--text:#101828;--topbar-bg:#ffffff;--topbar-border:#e7eaf0;--topbar-text:#101828;--card-bg:#ffffff;--card-border:#e7ebf3;--panel-bg:#f9fafb;--panel-border:#e7eaf0;--heading:#0f172a;--muted:#6b7280;--accent:#ff8c1a;--accent-contrast:#ffffff}
html,body{padding:0;margin:0;background:var(--bg);color:var(--text);font-family:'Vazirmatn','IRANSansX',Tahoma,Arial,sans-serif}
.topbar{display:flex;align-items:center;justify-content:space-between;padding:16px 24px;background:var(--topbar-bg);border-bottom:1px solid var(--topbar-border);color:var(--topbar-text);position:sticky;top:0;z-index:100}
.brand{display:flex;align-items:center;gap:12px}
.logo{height:28px;width:28px;border-radius:6px}
.logo-fallback{height:28px;width:28px;border-radius:6px;background:var(--accent)}
.brand-text{display:flex;flex-direction:column;gap:1px}
.title{color:var(--heading);font-weight:600;font-size:18px;line-height:1.2}
.subtitle{color:var(--muted);font-size:11px;font-weight:400}
:root[data-theme='dark'] .brand strong{color:#ffffff}
:root[data-theme='light'] .brand strong{color:#000000}
.status-dot{width:10px;height:10px;border-radius:50%;display:inline-block;margin-right:8px}
.status-ok{background:#2ecc71;box-shadow:0 0 0 3px rgba(46,204,113,.18)}
.status-warn{background:#f1c40f;box-shadow:0 0 0 3px rgba(241,196,15,.18);animation:pulseWarn 1.6s ease-in-out infinite}
.status-err{background:#e74c3c;box-shadow:0 0 0 3px rgba(231,76,60,.18);animation:pulseErr 1.4s ease-in-out infinite}
.actions{display:flex;align-items:center;gap:16px}
.status{display:flex;align-items:center;gap:8px;padding:6px 12px;border-radius:8px;background:var(--panel-bg);border:1px solid var(--panel-border)}
.status-text{font-size:13px;font-weight:500;color:var(--text)}
.virtual-display-btn{display:flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:8px;border:1px solid var(--panel-border);background:var(--panel-bg);cursor:pointer;transition:all 0.15s ease}
.virtual-display-btn:hover{background:var(--accent);border-color:var(--accent);color:var(--accent-contrast)}
.btn-icon{font-size:16px}
.theme-btn{display:flex;align-items:center;justify-content:center;width:36px;height:36px;border-radius:8px;border:1px solid var(--panel-border);background:var(--panel-bg);cursor:pointer;transition:all 0.15s ease}
.theme-btn:hover{background:var(--accent);border-color:var(--accent);color:var(--accent-contrast)}
.theme-icon{font-size:16px}
.nav-btn{display:inline-flex;align-items:center;justify-content:center;height:36px;padding:0 12px;border-radius:8px;border:1px solid var(--panel-border);background:var(--panel-bg);color:var(--text);cursor:pointer;transition:all .15s ease;text-decoration:none;font-weight:600}
.nav-btn:hover{background:var(--accent);border-color:var(--accent);color:var(--accent-contrast)}
.theme-toggle .icon{font-size:14px;line-height:1}
.theme-toggle .sun{margin-inline-start:8px}
.theme-toggle .moon{margin-inline-start:auto;margin-inline-end:8px}
.theme-toggle .knob{position:absolute;top:3px;right:3px;width:26px;height:26px;border-radius:50%;background:var(--accent);box-shadow:0 6px 16px rgba(0,0,0,.18);transition:transform .18s ease}
:root[data-theme='light'] .theme-toggle .knob{transform:translateX(-30px)}
:root[data-theme='dark'] .theme-toggle .knob{transform:translateX(0)}
.top-actions .meta{display:flex;align-items:center;gap:8px}
.muted{color:var(--muted);font-size:12px}
.device-url{max-width:260px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:var(--muted);font-size:12px}
.meta-chip{display:flex;align-items:center;gap:8px;padding:6px 10px;border:1px solid var(--topbar-border);border-radius:12px;background:color-mix(in srgb,var(--topbar-bg),#000 4%)}
.cards{display:grid;grid-template-columns:repeat(5,minmax(220px,1fr));gap:14px;padding:14px}
.card{background:var(--card-bg);border:1px solid var(--card-border);border-radius:12px;overflow:hidden;box-shadow:0 4px 14px rgba(0,0,0,.35);min-height:240px;position:relative}
.card.card--empty{background:#101620;border:1px dashed #2b3647}
.card.card--disabled{opacity:.88;filter:grayscale(.2)}
.card.card--disabled .control *,.card.card--disabled .btn,.card.card--disabled input{cursor:not-allowed}
.card.card--empty .card-header{opacity:.65}
.card.card--empty .card-body{display:flex;align-items:center;justify-content:center}
.card.card--empty .empty-slot{width:60%;height:60%;border-radius:12px;background:rgba(255,255,255,.04);border:1px dashed #2b3647}
.card-header{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid var(--card-border)}
.card-header strong{color:var(--heading)}
:root[data-theme='dark'] .card-header strong{color:#ffffff}
:root[data-theme='light'] .card-header strong{color:#000000}
.card-body{padding:14px;display:grid;grid-template-columns:1fr;gap:14px;align-items:center}
.controls{display:grid;grid-template-columns:1fr;gap:10px}
.setpoint{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
.setpoint input[type=range]{flex:1 1 100%;width:100%}
.fan{position:relative;width:var(--fanSize);height:var(--fanSize);border-radius:50%;background:radial-gradient(60% 60% at 50% 50%,#f8fafc,#eef2f7 60%,#eef2f7 100%);border:2px solid #d1d5db;box-shadow:inset 0 0 8px rgba(0,0,0,.06),0 2px 8px rgba(0,0,0,.06);display:flex;align-items:center;justify-content:center;margin:auto;transition:border-color .2s,box-shadow .2s,filter .2s}
.fan svg{width:calc(var(--fanSize) - 16px);height:calc(var(--fanSize) - 16px)}
.fan .blade{transform-origin:50% 50%;animation:spin linear infinite;will-change:transform,filter}
.fan.stopped .blade{animation-play-state:paused}
.fan.running svg{filter:none}
.fan.alarm svg{filter:none}
.fan.stopped svg{filter:none}
.fan.running{border-color:#22c55e;box-shadow:inset 0 0 8px rgba(34,197,94,.15),0 0 0 4px rgba(34,197,94,.12),0 2px 8px rgba(34,197,94,.15)}
.fan.alarm{border-color:#f59e0b;box-shadow:inset 0 0 8px rgba(245,158,11,.2),0 0 0 4px rgba(245,158,11,.12),0 2px 8px rgba(245,158,11,.15)}
.fan.stopped{border-color:#cbd5e1;filter:grayscale(.3);box-shadow:inset 0 0 8px rgba(0,0,0,.06),0 2px 8px rgba(0,0,0,.06)}
.fan::before{content:"";position:absolute;inset:10px;border-radius:50%;pointer-events:none;opacity:.18;background:repeating-radial-gradient(circle at 50% 50%,rgba(0,0,0,.05) 0 1px,transparent 1px 8px)}
.fan::after{content:"";position:absolute;inset:6px;border-radius:50%;pointer-events:none;opacity:.18;background:repeating-conic-gradient(from 0deg,rgba(0,0,0,.05) 0 8deg,transparent 8deg 22deg);-webkit-mask-image:radial-gradient(circle at 50% 50%,transparent 0 34%,black 34% 100%);mask-image:radial-gradient(circle at 50% 50%,transparent 0 34%,black 34% 100%)}
@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
@keyframes pulseWarn{0%{box-shadow:0 0 0 2px rgba(241,196,15,.24)}70%{box-shadow:0 0 0 8px rgba(241,196,15,0)}100%{box-shadow:0 0 0 2px rgba(241,196,15,.24)}}
@keyframes pulseErr{0%{box-shadow:0 0 0 2px rgba(231,76,60,.24)}70%{box-shadow:0 0 0 8px rgba(231,76,60,0)}100%{box-shadow:0 0 0 2px rgba(231,76,60,.24)}}
.control{background:var(--panel-bg);border:1px solid var(--panel-border);border-radius:10px;padding:10px;transition:background .2s,border-color .2s}
.control h6{margin:0 0 8px;color:var(--heading);font-size:12px;text-transform:uppercase;letter-spacing:.06em}
.toggle{display:flex;align-items:center;gap:10px}
.toggle .switch-label{color:#6b7280;font-weight:600}
.toggle label input:checked + .switch-label{color:#22c55e}
.toggle input{width:44px;height:22px}
.value-big{font-size:28px;font-weight:600;min-width:72px;text-align:right;color:var(--heading)}
.btn-step{width:28px;height:28px;border-radius:8px;border:1px solid var(--panel-border);background:var(--panel-bg);color:var(--text);line-height:26px;text-align:center;padding:0;font-weight:600}
.btn-step:hover{filter:brightness(.95)}
.btn-step.plus{box-shadow:inset 0 0 8px rgba(46,204,113,.25)}
.btn-step.minus{box-shadow:inset 0 0 8px rgba(231,76,60,.25)}
.badge-state{padding:4px 8px;border-radius:4px;font-size:12px}
.badge-running{background:#22c55e;color:#fff}
.badge-stopped{background:#9ca3af;color:#fff}
.badge-alarm{background:#f59e0b;color:#000}
.footer{padding:10px 16px;color:var(--muted);font-size:12px;border-top:1px solid var(--topbar-border)}
@media(max-width:768px){.cards{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}.controls{grid-template-columns:1fr 1fr}}
@media(max-width:576px){.card-body{grid-template-columns:1fr}.fan{margin:8px auto 12px}.controls{grid-template-columns:1fr}}
:root[data-theme='dark']{--bg:#0c1933;--text:#e6edf3;--topbar-bg:#0b1830;--topbar-border:#15213d;--topbar-text:#e6edf3;--card-bg:#0e1d3a;--card-border:#15213d;--panel-bg:#0b1830;--panel-border:#15213d;--heading:#d0d7de;--muted:#9aa4b2;--accent:#ff8c1a;--accent-contrast:#ffffff}
:root[data-theme='light']{--bg:#fefefe;--text:#101828;--topbar-bg:#ffffff;--topbar-border:#e7eaf0;--topbar-text:#101828;--card-bg:#ffffff;--card-border:#e7ebf3;--panel-bg:#f9fafb;--panel-border:#e7eaf0;--heading:#0f172a;--muted:#6b7280;--accent:#ff8c1a;--accent-contrast:#ffffff}
.btn{border-radius:10px;font-weight:600;transition:transform .08s ease,filter .12s ease,box-shadow .12s ease}
.btn:active{transform:scale(.98)}
.btn-primary,.btn-theme{background:linear-gradient(180deg, color-mix(in srgb, var(--accent), #fff 12%), var(--accent));border-color:var(--accent);color:var(--accent-contrast);box-shadow:0 6px 16px rgba(255,140,26,.22)}
.btn-primary:hover,.btn-theme:hover{filter:brightness(1.06)}
input[type=range],input[type=checkbox],input[type=radio]{accent-color:var(--accent)}

/* Dark theme enforce full-page dark background */
:root[data-theme='dark'] html,:root[data-theme='dark'] body{background:var(--bg) !important}

/* Dark theme fan shroud override */
:root[data-theme='dark'] .fan{background:radial-gradient(60% 60% at 50% 50%,#0f1e3d,#14264d 60%,#14264d 100%);border:0;box-shadow:none}
:root[data-theme='dark'] .fan.running,:root[data-theme='dark'] .fan.alarm{border:0;box-shadow:none}
/* Dark theme state glow without ring */
:root[data-theme='dark'] .fan.running{box-shadow:inset 0 0 22px rgba(34,197,94,.35) !important}
:root[data-theme='dark'] .fan.alarm{box-shadow:inset 0 0 22px rgba(245,158,11,.35) !important}
:root[data-theme='dark'] .fan.stopped{filter:grayscale(.45)}
/* Tint blade stroke by state in dark theme */
:root[data-theme='dark'] .fan.running svg path{stroke:#22c55e}
:root[data-theme='dark'] .fan.alarm svg path{stroke:#f59e0b}
:root[data-theme='dark'] .fan.stopped svg path{stroke:#94a3b8}
:root[data-theme='dark'] .fan.running,:root[data-theme='dark'] .fan.alarm{border-color:#243656;box-shadow:inset 0 0 12px rgba(0,0,0,.25),0 2px 10px rgba(0,0,0,.22)}
